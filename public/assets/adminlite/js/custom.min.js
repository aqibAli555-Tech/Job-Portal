$(function(){"use strict";feather.replace(),$(".preloader").fadeOut(),$(".nav-toggler").on("click",function(){$("#main-wrapper").toggleClass("show-sidebar"),$(".nav-toggler i").toggleClass("ti-menu")}),$(function(){$(".service-panel-toggle").on("click",function(){$(".customizer").toggleClass("show-service-panel")}),$(".page-wrapper").on("click",function(){$(".customizer").removeClass("show-service-panel")})}),$(function(){$('[data-bs-toggle="tooltip"]').tooltip()}),$(function(){$('[data-bs-toggle="popover"]').popover()}),$(".message-center, .customizer-body, .scrollable, .scroll-sidebar").perfectScrollbar({wheelPropagation:!0}),$("body, .page-wrapper").trigger("resize"),$(".page-wrapper").delay(20).show(),$(".list-task li label").click(function(){$(this).toggleClass("task-done")}),$(".show-left-part").on("click",function(){$(".left-part").toggleClass("show-panel"),$(".show-left-part").toggleClass("ti-menu")}),$(".custom-file-input").on("change",function(){var e=$(this).val();$(this).next(".custom-file-label").html(e)})});


$(document).ready(function() {
    $('#affiliate-form').on('submit', function(e) {
        e.preventDefault();
        let form = $(this)[0];
        let formData = new FormData(form);

        let actionUrl = $(this).attr('action');

        $.ajax({
            url: actionUrl,
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            beforeSend: function(){
                $('.preloader').show();
            },
            success: function(response) {
                $('.preloader').hide();
                if (response.status) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Success!',
                        text: response.message,
                    });
                    location.reload();
                } else {
                    if (response.errors && Array.isArray(response.errors) && response.errors.length > 0) {
                        let errorMessages = response.errors.join('<br>');
                        Swal.fire({
                            icon: 'error',
                            title: 'Validation Failed!',
                            html: errorMessages,
                        });
                    } else {
                        Swal.fire({
                            icon: 'error',
                            html: response.message,
                        });
                    }

                }
            },
            error: function(xhr) {
                $('.preloader').hide();
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: 'An error occurred while processing your request.',
                });
            },
        });
    });
});

function validatePhoneInput(event) {
    const input = event.target;
    const value = input.value;
    const cleanedValue = value.replace(/[^0-9+]/g, '');
    input.value = cleanedValue;
}
$(".toggle-password").click(function() {
    $(this).toggleClass("fa-eye fa-eye-slash");
    
    var input = $($(this).attr("toggle"));
    
    if (input.attr("type") == "password") {
        input.attr("type", "text");
    } else {
        input.attr("type", "password");
    }
});
$(".toggle-password-confirmation").click(function() {
    $(this).toggleClass("fa-eye fa-eye-slash");
    
    var input = $($(this).attr("toggle"));
    
    if (input.attr("type") == "password") {
        input.attr("type", "text");
    } else {
        input.attr("type", "password");
    }
});
function numericInput(event) {
    const input = event.target;
    const value = input.value;
    const cleanedValue = value.replace(/[^0-9]/g, '');
    input.value = cleanedValue;
}